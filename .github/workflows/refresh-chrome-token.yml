name: Refresh Chrome Web Store Token

# Googleã®ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãƒˆãƒ¼ã‚¯ãƒ³ã¯6ãƒ¶æœˆé–“ä½¿ç”¨ã•ã‚Œãªã„ã¨å¤±åŠ¹ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ã€
# æœˆæ¬¡ã§ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä½¿ç”¨ã—ã¦æœ‰åŠ¹æœŸé™ã‚’å»¶é•·ã—ã¾ã™
on:
  schedule:
    # æ¯æœˆ2æ—¥ã®åˆå‰3æ™‚ï¼ˆUTCï¼‰ã«å®Ÿè¡Œ
    - cron: '0 3 2 * *'
  # æ‰‹å‹•å®Ÿè¡Œã‚‚å¯èƒ½
  workflow_dispatch:

permissions:
  contents: read

jobs:
  refresh-token:
    runs-on: ubuntu-latest

    steps:
      - name: Refresh Google API Token
        uses: cardinalby/google-api-fetch-token-action@v1
        with:
          clientId: ${{ secrets.CHROME_CLIENT_ID }}
          clientSecret: ${{ secrets.CHROME_CLIENT_SECRET }}
          refreshToken: ${{ secrets.CHROME_REFRESH_TOKEN }}

      - name: Token refresh summary
        run: |
          echo "âœ… Chrome Web Store APIãƒˆãƒ¼ã‚¯ãƒ³ãŒãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ã•ã‚Œã¾ã—ãŸ"
          echo "ğŸ“… æ¬¡å›å®Ÿè¡Œäºˆå®š: æ¥æœˆ2æ—¥"
          echo "â„¹ï¸  ã“ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã¯ãƒˆãƒ¼ã‚¯ãƒ³ã®æœ‰åŠ¹æœŸé™åˆ‡ã‚Œã‚’é˜²ãã¾ã™"
